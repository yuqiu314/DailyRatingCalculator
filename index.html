<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>德育分统计小工具</title>
  <style>
    textarea{
      height:500px;
      width:200px;
    }
  </style>
</head>
<body>
<textarea id="textarea1"></textarea>
<textarea id="textarea2"></textarea>
  <script>
var textarea1 = document.getElementById("textarea1");
var textarea2 = document.getElementById("textarea2");
textarea1.addEventListener("keyup", (event) => {
    if (event.isComposing || event.keyCode === 229) {
      return;
    }
    var studentsscore = Array(50).fill(0);
    var lines = textarea1.value.split('\n');
    for(var l = 0;l < lines.length;l++) {
        var nums = lines[l].split(' ');
        if(nums.length > 1 && Number(nums[0])) {
            var score = Number(nums[0]);
            for(var i = 1;i < nums.length;i++) {
                var student = Number(nums[i]);
                if(student > 0 && student < 50) {
                    studentsscore[student] += score;
                }
            }
        }
    }
    var output = '统计结果：';
    for(var i = 0; i < studentsscore.length; i++) {
        if(studentsscore[i] != 0) {
            output = output + '\n' + i + ' ' + studentsscore[i];
        }
    }
    textarea2.value = output;
  });
  </script>
</body>
</html>
